
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Register</title>
    <script>
        function updateFields() {
            const identity = document.getElementById("identity").value;
            
            // 根據選擇的角色顯示或隱藏欄位
            document.getElementById("GidField").style.display = identity === "客戶" ? "block" : "none";
            document.getElementById("RidField").style.display = identity === "餐廳" ? "block" : "none";
            document.getElementById("DidField").style.display = identity === "外送員" ? "block" : "none";
            
            // 設定欄位的必填屬性
            document.getElementById("Gid").required = identity === "客戶";
            document.getElementById("Rid").required = identity === "餐廳";
            document.getElementById("Did").required = identity === "外送員";
        }

        function redirectBasedOnRole(event) {
            const form = document.getElementById("registerForm");
            const identity = document.getElementById("identity").value;

            // 根據角色設定不同的 action
            if (identity === "客戶") {
                form.action = "/guestinformation";
            } else if (identity === "餐廳") {
                form.action = "/restaurantinformation";
            } else if (identity === "外送員") {
                form.action = "/deliveryinformation";
            } else {
                alert("請選擇角色！");
                event.preventDefault(); // 阻止表單提交
            }
        }
    </script>
</head>
<body>
    <p>註冊</p>
    <hr />
    <form id="registerForm" method="post" action="/register" onsubmit="redirectBasedOnRole(event)">
        <label>角色:</label>
        <select id="identity" name="identity" onchange="updateFields()" required>
            <option value="" selected disabled>請選擇角色</option>
            <option value="客戶">客戶</option>
            <option value="餐廳">餐廳</option>
            <option value="外送員">外送員</option>
        </select>
        
        <br>
        
        <label>帳號:</label>
        <input name="id" type="text" required /> <br>

        <label>密碼:</label>
        <input name="pw" type="password" required /> <br><br>

        <button type="submit" onclick="return confirm('註冊成功')">確認</button>
    </form>

    <a href="/loginPage">回到登入頁面</a>
</body>
</html>
